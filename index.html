<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZindeKal Modal Plugin - Example</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/global.css">

  <!-- Plyr video player dependencies -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <link rel="stylesheet" href="styles/video-player.css">

  <!-- Plugin dependencies -->
  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js" defer></script>
  <script src="scripts/audio-player.js" defer></script>
  <script src="scripts/zinde-kal-modal.js" defer></script>

  <!-- Optional: Rive animation support -->
  <script src="https://unpkg.com/@rive-app/canvas" defer></script>
</head>

<body>
  <!-- Demo düğmeleri -->
  <div class="button-container">
    <button id="openModalBtn" class="zinde-kal-button">ZindeKal Modalini Aç</button>
    <button id="openScheduledModalBtn" class="zinde-kal-button">Zamanlanmış Modal (3s)</button>
    <button id="showToastBtn" class="notification-button">Bildirim Göster</button>
    <button id="showScheduledToastBtn" class="notification-button">Zamanlanmış Bildirim (3s)</button>
    <button id="switchToMusicBtn" class="zinde-kal-button">Müzik Sekmesini Aç</button>

    <a href="https://github.com/burhanyldz/zindekal" target="_blank" style="text-align: center;">
      GitHub'da ZindeKal
    </a>
  </div>

  <script>
    // Örnek yapılandırma verisi
    const sampleConfig = {
      container: document.body,

      // Modal ayarları
      modal: {
        title: "Zinde Kal",
        closeOnOverlay: true,
        closeOnEscape: true,
        showCloseButton: true
      },

      // Egzersiz içeriği (videolar). Kategoriler sabittir ve JS içinde tanımlıdır.
      exercise: {
        videos: [
          {
            id: "ankle-1",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "02:15"
          },
          {
            id: "ankle-2",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "09:01"
          },
          {
            id: "ankle-3",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/made in history.png",
            src: "videos/The Entire History of Africa in Under 10 Minutes - Documentary.mp4",
            duration: "02:44"
          },
          {
            id: "ankle-4",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/coffee.png",
            src: "videos/What does coffee do to your body - BBC World Service.mp4",
            duration: "02:15"
          },
          {
            id: "wrist-1",
            categoryId: "wrist",
            title: "El Bileği Egzersizi",
            description: "Videoda oturarak el bileği esnetme, dairesel döndürme ve parmak germe hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/coffee.png",
            src: "videos/What does coffee do to your body - BBC World Service.mp4",
            duration: "02:15"
          },
          {
            id: "wrist-2",
            categoryId: "wrist",
            title: "El Bileği Egzersizi",
            description: "Videoda oturarak el bileği esnetme, dairesel döndürme ve parmak germe hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/made in history.png",
            src: "videos/The Entire History of Africa in Under 10 Minutes - Documentary.mp4",
            duration: "02:44"
          },
          {
            id: "neck-1",
            categoryId: "neck",
            title: "Boyun Egzersizi",
            description: "Videoda oturarak boyun esnetme hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/coffee.png",
            src: "videos/What does coffee do to your body - BBC World Service.mp4",
            duration: "02:15"
          },
          {
            id: "shoulder-1",
            categoryId: "shoulder",
            title: "Ayakta Omuz Egzersizi 1",
            description: "Ayakta yapılan omuz egzersizleri ile kas gerginliğini azaltın.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "08:20"
          },
          {
            id: "shoulder-2",
            categoryId: "shoulder",
            title: "Oturarak Omuz Egzersizi 1",
            description: "Masada otururken yapabileceğiniz omuz egzersizleri.",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "02:45"
          }
        ]
      },

      // Rahatlatıcı videolar
      relaxing: {
        videos: [
          {
            id: "peaceful-1",
            title: "Türkiye'nin Turistik Güzellikleri ve Doğa Sesleri",
            description: "Rahatlatıcı doğa sesleri ve görüntüleri ile kendinizi dinlendirin.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "05:30"
          },
          {
            id: "peaceful-2",
            title: "Nefes Egzersizi",
            description: "Derin nefes teknikleri ile stresinizi azaltın ve rahatlatın.",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "03:45"
          }
        ]
      },

      // Müzik çalma listesi
      music: {
        currentTrack: 0,
        autoplay: false,
        tracks: [
          {
            id: "track-1",
            title: "Sessiz Akşam",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "4:12"
          },
          {
            id: "track-2",
            title: "Huzur Melodisi",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "3:28"
          },
          {
            id: "track-3",
            title: "Doğa Sesleri",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "5:15"
          },
          {
            id: "track-4",
            title: "Rahatlatıcı Piyano",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "4:42"
          },
          {
            id: "track-5",
            title: "Klasik Müzik",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "6:18"
          }
        ]
      }
    };

    // Modal eklentisini başlat
    let zindeKalModal;

    document.addEventListener('DOMContentLoaded', function () {
      try {

        let delayCount = 0;

        // Eklentiyi örnek konfigürasyonla başlat
        zindeKalModal = new ZindeKalModal(sampleConfig);

        // Olay bağlayıcıları (Metodlarla bağlanır)
        zindeKalModal
          .onOpen((modal) => {
            console.log('ZindeKal Modal açıldı', modal);
          })
          .onClose((modal) => {
            console.log('ZindeKal Modal kapandı', modal);
          })
          .onTabChange((newTab, oldTab, modal) => {
            console.log('Sekme değişti:', { newTab, oldTab, modal });
          })
          .onVideoPlay((videoSrc, modal) => {
            console.log('Video oynatma istendi:', videoSrc);
          })
          .onVideoPause((videoSrc, modal) => {
            console.log('Video durduruldu:', videoSrc);
          })
          .onAudioPlay((track, modal) => {
            console.log('Ses çalıyor:', track);
          })
          .onAudioPause((track, modal) => {
            console.log('Ses duraklatıldı:', track);
          })
          .onDelayButtonClick((modal) => {
            console.log('Delay butonu tıklandı:', modal);
            if (delayCount === 2) {
              delayCount = 0;
              zindeKalModal.open({ schedule: 600 }); // 10 dakika sonra zindekal modalını aç
            } else {
              delayCount++;
              zindeKalModal.showToast('Uzun süredir çalışıyorsunuz. Kısa bir mola vermek için tıklayın.', { schedule: 600 });
            }
          });


        document.getElementById('openModalBtn').addEventListener('click', () => {
          zindeKalModal.open();
        });

        document.getElementById('openScheduledModalBtn').addEventListener('click', () => {
          zindeKalModal.open({ schedule: 3 });
        });

        document.getElementById('showToastBtn').addEventListener('click', () => {
          zindeKalModal.showToast('Uzun süredir çalışıyorsunuz. Kısa bir mola vermek için tıklayın.');
        });

        document.getElementById('showScheduledToastBtn').addEventListener('click', () => {
          zindeKalModal.showToast('Bu bildirim 3 saniye sonra otomatik olarak gösterildi!', { schedule: 3 });
        });

        document.getElementById('switchToMusicBtn').addEventListener('click', () => {
          zindeKalModal.open();
          zindeKalModal.switchTab('music');
        });

      } catch (error) {
        console.error('Failed to initialize ZindeKal Modal:', error);
      }
    });

    // zindeKalModal fonksiyonları
    // .open()
    // .close()
    // .switchTab(tabId)
    // .toggleAudioPlay()
    // .nextTrack()
    // .previousTrack()
    // .showToast(message)
    // .hideToast()
    // .isOpen()
    // .getCurrentTab()
    // .getCurrentTrack()
    // .getConfig()
    // .updateConfig(newConfig)
    // .destroy()

  </script>

</body>

</html>