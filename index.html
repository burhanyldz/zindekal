<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZindeKal Modal Plugin - Example</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="global.css">
  
  <!-- Plyr video player dependencies -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <link rel="stylesheet" href="video-player.css">
  
  <!-- Plugin dependencies -->
  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js" defer></script>
  <script src="audio-player.js" defer></script>
  <script src="zinde-kal-modal.js" defer></script>
    
  <!-- Optional: Rive animation support -->
  <script src="https://unpkg.com/@rive-app/canvas" defer></script>
</head>
<body>
  <!-- Demo buttons -->
  <div class="button-container">
    <button id="openModalBtn" class="zinde-kal-button">Open ZindeKal Modal</button>
    <button id="showToastBtn" class="notification-button">Show Toast Notification</button>
    <button id="updateConfigBtn" class="zinde-kal-button">Update Config</button>
    <button id="switchToMusicBtn" class="zinde-kal-button">Open Music Tab</button>
  </div>

  <!-- Demo info -->
  <div style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h1>ZindeKal Modal Plugin Example</h1>
    <p>This demonstrates the ZindeKal Modal Plugin with sample JSON configuration data. Click the buttons above to test different features.</p>
    
    <h2>Current Configuration</h2>
    <pre id="configDisplay" style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;"></pre>
    
    <h2>Event Log</h2>
    <div id="eventLog" style="height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; background: #f9f9f9;"></div>
  </div>

  <script>
    // Sample configuration data
    const sampleConfig = {
      container: document.body,
      
      // Modal settings
      modal: {
        title: "Zinde Kal",
        closeOnOverlay: true,
        closeOnEscape: true,
        showCloseButton: true
      },
      
      // Tab configuration
      tabs: {
        exercise: { title: "Egzersizler", enabled: true },
        music: { title: "Müzikler", enabled: true },
        relaxing: { title: "Videolar", enabled: true }
      },
      
      // Exercise content
      exercise: {
        categories: [
          {
            id: "ankle",
            title: "Ayak Bileği Egzersizi",
            icon: "ayak.svg",
            iconClass: "icon-ayak",
            videoCount: 2
          },
          {
            id: "shoulder-standing",
            title: "Ayakta Omuz Egzersizi",
            icon: "ayakta_omuz.svg",
            iconClass: "icon-omuz",
            videoCount: 6
          },
          {
            id: "shoulder-sitting",
            title: "Oturarak Omuz Egzersizi",
            icon: "oturarak_omuz.svg",
            iconClass: "icon-oturarak-omuz",
            videoCount: 4
          },
          {
            id: "walking",
            title: "Yürüyüş Egzersizi",
            icon: "yuruyus.svg",
            iconClass: "icon-yuruyus",
            videoCount: 3,
            badge: "Yeni"
          },
          {
            id: "eye",
            title: "Göz Egzersizi",
            icon: "goz.svg",
            iconClass: "icon-goz",
            videoCount: 3,
            badge: "Yeni"
          },
          {
            id: "back-standing",
            title: "Ayakta Bel Egzersizi",
            icon: "ayakta_bel.svg",
            iconClass: "icon-ayakta-bel",
            videoCount: 1,
            badge: "Yeni"
          },
          {
            id: "breathing",
            title: "Nefes Egzersizi",
            icon: "nefes.svg",
            iconClass: "icon-nefes",
            videoCount: 1,
            badge: "Yeni"
          }
        ],
        videos: [
          {
            id: "ankle-1",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Bu egzersizde ayak bileği çevrilir, öne ve arkaya esneme yapılır, böylece eklem hareketliliği artırılır.",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "02:15"
          },
          {
            id: "ankle-2",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "09:01"
          },
          {
            id: "ankle-3",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/made in history.png",
            src: "videos/The Entire History of Africa in Under 10 Minutes - Documentary.mp4",
            duration: "02:44"
          },
          {
            id: "ankle-4",
            categoryId: "ankle",
            title: "Ayak Bileği Egzersizi",
            description: "Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.",
            thumbnail: "thumbnails/coffee.png",
            src: "videos/What does coffee do to your body - BBC World Service.mp4",
            duration: "02:15"
          },
          {
            id: "shoulder-1",
            categoryId: "shoulder-standing",
            title: "Ayakta Omuz Egzersizi 1",
            description: "Ayakta yapılan omuz egzersizleri ile kas gerginliğini azaltın.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "08:20"
          },
          {
            id: "shoulder-2",
            categoryId: "shoulder-sitting",
            title: "Oturarak Omuz Egzersizi 1",
            description: "Masada otururken yapabileceğiniz omuz egzersizleri.",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "02:45"
          }
        ]
      },
      
      // Relaxing videos
      relaxing: {
        videos: [
          {
            id: "peaceful-1",
            title: "Dinlendirici Video",
            description: "Rahatlatıcı doğa sesleri ve görüntüleri ile kendinizi dinlendirin.",
            thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
            src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
            duration: "05:30"
          },
          {
            id: "peaceful-2",
            title: "Nefes Egzersizi",
            description: "Derin nefes teknikleri ile stresinizi azaltın ve rahatlatın.",
            thumbnail: "thumbnails/serengeti.png",
            src: "videos/A Day In The Life Of Serengeti Animals  Serengeti II  BBC Earth Kids.mp4",
            duration: "03:45"
          }
        ]
      },
      
      // Music playlist
      music: {
        currentTrack: 1,
        autoplay: false,
        tracks: [
          {
            id: "track-1",
            title: "Sessiz Akşam",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "4:12"
          },
          {
            id: "track-2",
            title: "Huzur Melodisi",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "3:28"
          },
          {
            id: "track-3",
            title: "Doğa Sesleri",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "5:15"
          },
          {
            id: "track-4",
            title: "Rahatlatıcı Piyano",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "4:42"
          },
          {
            id: "track-5",
            title: "Klasik Müzik",
            artist: "Dinlendirici Müzikler",
            src: "music/Vivaldi - The Four Seasons.mp3",
            duration: "6:18"
          }
        ]
      },
      
      // Toast notification
      toast: {
        enabled: true,
        message: "MEBİ'de 2 saattir çalışıyorsunuz. Kısa bir mola vermek ister misiniz? Hadi, şimdi küçük bir egzersiz yapma zamanı!",
        icon: "images/kanka_head.png",
        autoHideDelay: 5000
      },
      
      // Asset paths
      assets: {
        basePath: "images/",
        icons: {
          close: "close.svg",
          closeActive: "close-active.svg",
          play: "play.svg",
          pause: "pause.svg",
          next: "next.svg",
          prev: "prev.svg",
          playSmall: "play-sm.svg",
          thumbnailPlay: "thumbnail-play.svg",
          muted: "muted.svg",
          unmuted: "unmuted.svg"
        }
      },
      
      // Event callbacks
      events: {
        onOpen: (modal) => {
          logEvent('Modal opened');
          console.log('ZindeKal Modal opened', modal);
        },
        onClose: (modal) => {
          logEvent('Modal closed');
          console.log('ZindeKal Modal closed', modal);
        },
        onTabChange: (newTab, oldTab, modal) => {
          logEvent(`Tab changed: ${oldTab} → ${newTab}`);
          console.log('Tab changed:', { newTab, oldTab, modal });
        },
        onVideoPlay: (videoSrc, modal) => {
          logEvent(`Video play requested: ${videoSrc}`);
          console.log('Video play requested:', videoSrc);
          
          // Custom video player integration example
          alert(`Playing video: ${videoSrc}\\n\\nIn a real implementation, you would:\\n- Open a video player\\n- Start playback\\n- Track viewing progress`);
        },
        onAudioPlay: (track, modal) => {
          logEvent(`Audio playing: ${track?.title || 'Unknown'}`);
          console.log('Audio playing:', track);
        },
        onAudioPause: (track, modal) => {
          logEvent(`Audio paused: ${track?.title || 'Unknown'}`);
          console.log('Audio paused:', track);
        }
      }
    };

    // Event logging function
    function logEvent(message) {
      const eventLog = document.getElementById('eventLog');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.marginBottom = '5px';
      logEntry.innerHTML = `<strong>${timestamp}:</strong> ${message}`;
      eventLog.appendChild(logEntry);
      eventLog.scrollTop = eventLog.scrollHeight;
    }

    // Display current configuration
    function updateConfigDisplay() {
      const configDisplay = document.getElementById('configDisplay');
      configDisplay.textContent = JSON.stringify(sampleConfig, null, 2);
    }

    // Initialize the modal plugin
    let zindeKalModal;
    
    document.addEventListener('DOMContentLoaded', function() {
      try {
        // Initialize modal with sample configuration
        zindeKalModal = new ZindeKalModal(sampleConfig);
        logEvent('Plugin initialized successfully');
        
        // Display configuration
        updateConfigDisplay();
        
        // Bind demo buttons
        document.getElementById('openModalBtn').addEventListener('click', () => {
          zindeKalModal.open();
        });
        
        document.getElementById('showToastBtn').addEventListener('click', () => {
          zindeKalModal.showToast('Bu bir test bildirimidir! Plugin doğru çalışıyor.');
        });
        
        document.getElementById('updateConfigBtn').addEventListener('click', () => {
          // Example of updating configuration
          const newConfig = {
            music: {
              currentTrack: 0,
              tracks: [
                ...sampleConfig.music.tracks,
                {
                  id: "new-track",
                  title: "Yeni Parça",
                  artist: "Test Sanatçısı",
                  src: "music/Vivaldi - The Four Seasons.mp3",
                  duration: "2:30"
                }
              ]
            }
          };
          
          zindeKalModal.updateConfig(newConfig);
          sampleConfig.music = newConfig.music; // Update display config
          updateConfigDisplay();
          logEvent('Configuration updated - New track added');
        });
        
        document.getElementById('switchToMusicBtn').addEventListener('click', () => {
          zindeKalModal.open();
          zindeKalModal.switchTab('music');
        });
        
      } catch (error) {
        console.error('Failed to initialize ZindeKal Modal:', error);
        logEvent(`Error: ${error.message}`);
      }
    });

    // Global functions for testing
    window.testAPI = {
      // Test modal operations
      openModal: () => zindeKalModal.open(),
      closeModal: () => zindeKalModal.close(),
      
      // Test tab switching
      switchToExercise: () => zindeKalModal.switchTab('exercise'),
      switchToRelaxing: () => zindeKalModal.switchTab('relaxing'),
      switchToMusic: () => zindeKalModal.switchTab('music'),
      
      // Test music controls
      playPause: () => zindeKalModal.toggleAudioPlay(),
      nextTrack: () => zindeKalModal.nextTrack(),
      prevTrack: () => zindeKalModal.previousTrack(),
      
      // Test notifications
      showToast: (message) => zindeKalModal.showToast(message),
      hideToast: () => zindeKalModal.hideToast(),
      
      // Test state
      isOpen: () => zindeKalModal.isOpen(),
      getCurrentTab: () => zindeKalModal.getCurrentTab(),
      getCurrentTrack: () => zindeKalModal.getCurrentTrack(),
      
      // Test configuration
      getConfig: () => zindeKalModal.getConfig(),
      
      // Test cleanup
      destroy: () => zindeKalModal.destroy()
    };

    // Log available test functions
    console.log('Available test functions:', Object.keys(window.testAPI));
    console.log('Example usage: testAPI.openModal(), testAPI.showToast("Hello!")');
  </script>

  <style>
    /* Additional demo styles */
    .button-container {
      display: flex;
      gap: 10px;
      justify-content: center;
      padding: 20px;
      flex-wrap: wrap;
    }
    
    .zinde-kal-button, .notification-button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background: #007bff;
      color: white;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    
    .zinde-kal-button:hover, .notification-button:hover {
      background: #0056b3;
    }
    
    #eventLog div {
      font-family: monospace;
      font-size: 12px;
      padding: 2px 0;
      border-bottom: 1px solid #eee;
    }
    
    #configDisplay {
      font-size: 12px;
      font-family: monospace;
      max-height: 300px;
      overflow: auto;
    }
    
    #configDisplay {
      font-size: 12px;
      font-family: monospace;
      max-height: 300px;
      overflow: auto;
    }
    
    /* Demo-specific styles only */
    @media (max-width: 768px) {
      .button-container {
        flex-direction: column;
        align-items: center;
      }
      
      #configDisplay {
        font-size: 10px;
      }
    }
  </style>
</body>
</html>