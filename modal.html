<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zinde Kal Modal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="global.css">
  <style>
    
  </style>

  <script src="global.js" defer></script>
  <script src="audio-player.js" defer></script>

</head>
<body>
  <!-- Button Container -->
  <div class="button-container">
    <button class="zinde-kal-button" onclick="openModal()">Zinde Kal</button>
    <button class="notification-button" onclick="showToast()">Bildirim Göster</button>
  </div>

  <!-- Toast Notification -->
  <div class="toast-notification" id="toastNotification">
    <div class="alert-content">
      <img src="images/31f8655fd69e0d6079ed8e8223050f64f0ecde46.png" alt="Alert Icon" class="alert-icon">
      <p class="alert-text">MEBİ'de 2 saattir çalışıyorsunuz. Kısa bir mola vermek ister misiniz? Hadi, şimdi küçük bir egzersiz yapma zamanı!</p>
    </div>
    <button class="close-button" onclick="hideToast()">
      <img src="images/I40002125_42726_40001809_131728.svg" alt="Close">
    </button>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
    <div class="modal-container" onclick="event.stopPropagation()">
      
      <!-- Modal Header with Tabs -->
      <header class="widget-header">
        <nav class="tabs-nav">
          <a href="#" class="tab-item active" onclick="switchTab('exercise')">Egzersiz Videoları</a>
          <a href="#" class="tab-item" onclick="switchTab('relaxing')">Dinlendirici Videolar</a>
          <a href="#" class="tab-item" onclick="switchTab('music')">Dinlendirici Müzikler</a>
        </nav>
        <button class="close-button" onclick="closeModal()">
          <img src="images/40002081_89320.svg" alt="Close">
        </button>
      </header>

      <!-- Exercise Videos Tab -->
      <div id="exercise-tab" class="tab-content active">
        <nav class="category-nav-scroll">
          <div class="category-nav">
            <a href="#" class="category-item active">
              <div class="category-icon icon-ayak">
                <img src="images/ayak.svg" alt="Ayak Bileği Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Ayak Bileği Egzersizi</span>
                <span class="category-count">2 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <div class="category-icon icon-omuz">
                <img src="images/ayakta_omuz.svg" alt="Ayakta Omuz Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Ayakta Omuz Egzersizi</span>
                <span class="category-count">6 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <div class="category-icon icon-oturarak-omuz">
                <img src="images/oturarak_omuz.svg" alt="Oturarak Omuz Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Oturarak Omuz Egzersizi</span>
                <span class="category-count">4 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <span class="badge">Yeni</span>
              <div class="category-icon icon-yuruyus">
                <img src="images/yuruyus.svg" alt="Yürüyüş Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Yürüyüş Egzersizi</span>
                <span class="category-count">3 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <span class="badge">Yeni</span>
              <div class="category-icon icon-goz">
                <img src="images/goz.svg" alt="Göz Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Göz Egzersizi</span>
                <span class="category-count">3 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <span class="badge">Yeni</span>
              <div class="category-icon icon-ayakta-bel">
                <img src="images/ayakta_bel.svg" alt="Ayakta Bel Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Ayakta Bel Egzersizi</span>
                <span class="category-count">1 Video</span>
              </div>
            </a>
            <a href="#" class="category-item">
              <span class="badge">Yeni</span>
              <div class="category-icon icon-nefes">
                <img src="images/nefes.svg" alt="Nefes Egzersizi" >
              </div>
              <div class="category-text">
                <span class="category-title">Nefes Egzersizi</span>
                <span class="category-count">1 Video</span>
              </div>
            </a>
          </div>
        </nav>

        <div class="video-grid">
          <article class="video-card">
            <figure class="video-thumbnail-container">
              <img src="images/22e0e7bafd270fb27277b8d9a15e880de2f195fe.png" alt="Ayak Bileği Egzersizi" class="video-thumbnail">
              <button class="play-button">
                <img src="images/I40002081_58013_40000826_22072_40000826_21640.svg" alt="Play" style="position: absolute; top: 20.25px; left: 20.25px; width: 31.5px; height: 31.5px;">
              </button>
            </figure>
            <div class="video-info">
              <div class="video-title-bar">
                <h3>Ayak Bileği Egzersizi</h3>
                <span>02dk 15s</span>
              </div>
              <p>Bu egzersizde ayak bileği çevrilir, öne ve arkaya esneme yapılır, böylece eklem hareketliliği artırılır.</p>
            </div>
          </article>
          <article class="video-card">
            <figure class="video-thumbnail-container">
              <img src="images/22e0e7bafd270fb27277b8d9a15e880de2f195fe.png" alt="Ayak Bileği Egzersizi" class="video-thumbnail">
              <button class="play-button">
                <img src="images/I40002081_71720_40000826_22072_40000826_21640.svg" alt="Play" style="position: absolute; top: 20.25px; left: 20.25px; width: 31.5px; height: 31.5px;">
              </button>
            </figure>
            <div class="video-info">
              <div class="video-title-bar">
                <h3>Ayak Bileği Egzersizi</h3>
                <span>02dk 15s</span>
              </div>
              <p>Videoda ayakta durarak dairesel bilek döndürme, öne-arkaya esnetme ve yana açma hareketleri gösterilmektedir.</p>
            </div>
          </article>
        </div>
      </div>

      <!-- Relaxing Videos Tab -->
      <div id="relaxing-tab" class="tab-content">
        <div class="video-grid">
          <article class="video-card">
            <figure class="video-thumbnail-container">
              <img src="images/e76d0e1e1ce805300ea1aea49625553b40899d3b.png" alt="Relaxing Video" class="video-thumbnail">
              <button class="play-button">
                <img src="images/I40002104_43994_40000826_21640.svg" alt="Play" style="position: absolute; top: 20.25px; left: 20.25px; width: 31.5px; height: 31.5px;">
              </button>
            </figure>
            <div class="video-info">
              <div class="video-title-bar">
                <h3>Dinlendirici Video</h3>
                <span>05:30</span>
              </div>
              <p>Rahatlatıcı doğa sesleri ve görüntüleri ile kendinizi dinlendirin.</p>
            </div>
          </article>
          <article class="video-card">
            <figure class="video-thumbnail-container">
              <img src="images/a9949c9bb887da3fed8cf42f1e3e8f8b139ea973.png" alt="Relaxing Video" class="video-thumbnail">
              <button class="play-button">
                <img src="images/I40002104_44005_40000826_21640.svg" alt="Play" style="position: absolute; top: 20.25px; left: 20.25px; width: 31.5px; height: 31.5px;">
              </button>
            </figure>
            <div class="video-info">
              <div class="video-title-bar">
                <h3>Nefes Egzersizi</h3>
                <span>03:45</span>
              </div>
              <p>Derin nefes teknikleri ile stresinizi azaltın ve rahatlatın.</p>
            </div>
          </article>
        </div>
      </div>

      <!-- Music Playlist Tab -->
      <div id="music-tab" class="tab-content" style="padding: 0;">
        <div class="music-content">
          <ul class="playlist">
            <li class="playlist-item">
              <div class="playlist-item-content">
                <div class="song-info">
                  <img src="images/play-sm.svg" alt="Play">
                  <span>Sessiz Akşam</span>
                </div> 
                <span>4:12</span>
              </div>
            </li>
            <li class="playlist-item active">
              <div class="playlist-item-content">
                <div class="song-info">
                  <canvas id="playing-riv" width="24" height="24"></canvas>
                  <span>Huzur Melodisi</span>
                </div> 
                <span>3:28</span>
              </div>
            </li>
            <li class="playlist-item hover">
              <div class="playlist-item-content">
                <div class="song-info">
                  <img src="images/play-sm.svg" alt="Play">
                  <span>Doğa Sesleri</span>
                </div> 
                <span>5:15</span>
              </div>
            </li>
            <li class="playlist-item">
              <div class="playlist-item-content">
                <div class="song-info">
                  <img src="images/play-sm.svg" alt="Play">
                  <span>Rahatlatıcı Piyano</span>
                </div> 
                <span>4:42</span>
              </div>
            </li>
            <li class="playlist-item">
              <div class="playlist-item-content">
                <div class="song-info">
                  <img src="images/play-sm.svg" alt="Play">
                  <span>Meditasyon Müziği</span>
                </div> 
                <span>6:18</span>
              </div>
            </li>
          </ul>
        </div>

        <footer class="music-player">
          <div class="player-song-details">
            <span class="player-song-title">Huzur Melodisi</span>
            <span class="player-song-artist">Dinlendirici Müzikler</span>
          </div>
          <div class="player-controls-container">
            <div class="player-controls">
              <button class="control-button">
                <img src="images/I40002093_48242_40002093_47916.svg" alt="Previous">
              </button>
              <button class="control-button play-pause-button">
                <img src="images/play.svg" alt="Play">
              </button>
              <button class="control-button">
                <img src="images/I40002093_48242_40002093_47919.svg" alt="Next">
              </button>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" style="cursor: pointer;">
                <div class="progress-bar-filled" style="width: 23.5%;"></div>
                <div class="progress-bar-thumb" style="left: 23.5%;"></div>
              </div>
              <div class="time-display">
                <span>00:49</span> / <span>03:28</span>
              </div>
              <button class="control-button volume-button">
                <img src="images/unmuted.svg" alt="Volume">
              </button>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </div>

  <script>
    // Audio player instance
    let audioPlayer = null;

    // Modal functionality
    function openModal() {
      document.getElementById('modalOverlay').classList.add('active');
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
    }

    function closeModal(event) {
      // Close only if clicking on overlay, not the modal content
      if (event && event.target !== document.getElementById('modalOverlay')) {
        return;
      }
      document.getElementById('modalOverlay').classList.remove('active');
      document.body.style.overflow = 'auto'; // Restore scrolling
      
      // Stop audio if playing
      if (audioPlayer) {
        audioPlayer.pause();
      }
    }

    // Tab switching functionality
    function switchTab(tabName) {
      // Remove active class from all tabs and tab contents
      document.querySelectorAll('.tab-item').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // Add active class to clicked tab
      event.target.classList.add('active');
      
      // Show corresponding tab content
      const tabContentMap = {
        'exercise': 'exercise-tab',
        'relaxing': 'relaxing-tab',
        'music': 'music-tab'
      };
      
      document.getElementById(tabContentMap[tabName]).classList.add('active');
      
      // Initialize audio player when music tab is selected
      if (tabName === 'music' && !audioPlayer) {
        initializeAudioPlayer();
      }
    }

    // Initialize audio player for the music tab
    function initializeAudioPlayer() {
      const musicPlayerFooter = document.querySelector('.music-player');
      if (musicPlayerFooter && !audioPlayer) {
        audioPlayer = new EmbeddedAudioPlayer({
          container: musicPlayerFooter,
          track: {
            title: 'Huzur Melodisi',
            album: 'Dinlendirici Müzikler',
            src: 'Vivaldi - The Four Seasons.mp3'
          },
          autoplay: false
        });
      }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
    });

    // Category selection functionality
    document.querySelectorAll('.category-item').forEach(item => {
      item.addEventListener('click', function(e) {
        e.preventDefault();
        // Remove active class from all categories
        document.querySelectorAll('.category-item').forEach(cat => cat.classList.remove('active'));
        // Add active class to clicked category
        this.classList.add('active');
      });
    });

    // Toast notification functionality
    function showToast() {
      const toast = document.getElementById('toastNotification');
      toast.classList.add('show');
      
      // Auto-hide after 5 seconds
      setTimeout(() => {
        hideToast();
      }, 5000);
    }

    function hideToast() {
      const toast = document.getElementById('toastNotification');
      toast.classList.remove('show');
    }

    // Initialize audio player when DOM is loaded if music tab is already active
    document.addEventListener('DOMContentLoaded', function() {
      // Check if music tab is initially active
      const musicTab = document.getElementById('music-tab');
      if (musicTab && musicTab.classList.contains('active')) {
        initializeAudioPlayer();
      }
    });
  </script>
      <script src="https://unpkg.com/@rive-app/canvas"></script>
  <script>
    // Initialize Rive animation when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      const canvas = document.getElementById("playing-riv");
      
      if (canvas) {
        // Set canvas size explicitly before creating Rive instance
        canvas.width = 24;
        canvas.height = 24;
        canvas.style.width = '24px';
        canvas.style.height = '24px';
        
        const r = new rive.Rive({
          src: "images/playing.riv",
          canvas: canvas,
          autoplay: true,
          stateMachines: "State Machine 1", // Use the correct name from your Rive file
          layout: new rive.Layout({
            fit: rive.Fit.Contain, // Fit the animation within the canvas
            alignment: rive.Alignment.Center
          }),
          onLoad: () => {
            // Set canvas size again after load to ensure it sticks
            canvas.width = 24;
            canvas.height = 24;
            canvas.style.width = '24px';
            canvas.style.height = '24px';
            
            // Resize drawing surface to match
            r.resizeDrawingSurfaceToCanvas();
            console.log("Rive animation loaded successfully");
          },
          onLoadError: (error) => {
            console.error("Failed to load Rive file:", error);
          },
          onError: (error) => {
            console.error("Rive error:", error);
          }
        });
      } else {
        console.error("Canvas element 'playing-riv' not found");
      }
    });
  </script>
</body>
</html>