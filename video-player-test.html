<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZindeKal Video Player Test</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="global.css">
  
  <!-- Plyr video player dependencies -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <link rel="stylesheet" href="video-player.css">
  
  <!-- Plugin dependencies -->
  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js" defer></script>
  <script src="audio-player.js" defer></script>
  <script src="zinde-kal-modal.js" defer></script>
</head>
<body>
  <div class="button-container">
    <button id="openModalWithVideo" class="zinde-kal-button">Open Modal with Inline Videos</button>
    <button id="cleanupVideos" class="zinde-kal-button">Cleanup All Videos</button>
  </div>

  <div style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h1>ZindeKal Inline Video Player Test</h1>
    <p>Test the new inline video player functionality that plays videos directly within the video cards.</p>
    
    <div id="eventLog" style="height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; background: #f9f9f9; margin-top: 20px;"></div>
  </div>

  <script>
    let modal;
    
    function logEvent(message) {
      const log = document.getElementById('eventLog');
      const timestamp = new Date().toLocaleTimeString();
      log.innerHTML += `[${timestamp}] ${message}<br>`;
      log.scrollTop = log.scrollHeight;
    }

    document.addEventListener('DOMContentLoaded', function() {
      // Test configuration with multiple videos
      const testConfig = {
        container: document.body,
        
        tabs: {
          exercise: { title: "Exercise Videos", enabled: true },
          relaxing: { title: "Relaxing Videos", enabled: true },
          music: { title: "Music", enabled: false }
        },
        
        exercise: {
          categories: [
            {
              id: "test",
              title: "Test Category",
              icon: "ayak.svg"
            }
          ],
          videos: [
            {
              id: "test-video-1",
              title: "Exercise Video 1",
              description: "Click to play inline - will replace thumbnail",
              duration: "5:00",
              src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
              thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
              categoryId: "test"
            },
            {
              id: "test-video-2",
              title: "Exercise Video 2",
              description: "Another inline video player test",
              duration: "3:15",
              src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
              thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
              categoryId: "test"
            }
          ]
        },
        
        relaxing: {
          videos: [
            {
              id: "relaxing-video-1",
              title: "Relaxing Video 1",
              description: "Plays directly in the card",
              duration: "3:30",
              src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
              thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg"
            },
            {
              id: "relaxing-video-2",
              title: "Relaxing Video 2",
              description: "Multiple videos can play simultaneously",
              duration: "4:20",
              src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
              thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg"
            }
          ]
        },
        
        events: {
          onOpen: () => logEvent('Modal opened'),
          onClose: () => logEvent('Modal closed'),
          onTabChange: (tab) => logEvent(`Tab changed to: ${tab}`),
          onVideoPlay: (src) => logEvent(`Inline video started playing: ${src}`)
        }
      };

      // Initialize modal
      modal = new ZindeKalModal(testConfig);
      logEvent('Modal initialized with inline video support');

      // Open modal with video button
      document.getElementById('openModalWithVideo').addEventListener('click', () => {
        logEvent('Opening modal with inline video functionality...');
        modal.open();
      });

      // Cleanup videos button
      document.getElementById('cleanupVideos').addEventListener('click', () => {
        logEvent('Cleaning up all inline video players...');
        if (modal) {
          modal.cleanupInlineVideoPlayers();
          logEvent('All inline videos cleaned up');
        }
      });
    });
  </script>
</body>
</html>