<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Video Pause Test</title>
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <link rel="stylesheet" href="video-player.css">
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js" defer></script>
    <script src="audio-player.js" defer></script>
    <script src="zinde-kal-modal.js" defer></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
        }
        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .test-button:hover {
            background: #218838;
        }
        .console-note {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üé¨ Multi-Video Pause Test</h1>
        
        <div class="console-note">
            <strong>üìπ TEST SCENARIO:</strong> When one video starts playing, all other videos should automatically pause.
            <br><strong>üîç Monitor Console:</strong> Look for "VIDEO PLAY EVENT" and "PAUSEALLOTHERVIDEOS" logs.
        </div>

        <button id="openModalBtn" class="test-button">üé¨ Test Multi-Video Pausing</button>

        <h2>Test Steps:</h2>
        <ol>
            <li>Click the button above to open the modal</li>
            <li>Go to "Egzersizler" tab and start a video</li>
            <li>Go to "Videolar" tab and start another video</li>
            <li>‚úÖ <strong>Expected:</strong> The first video should automatically pause</li>
            <li>Go back to "Egzersizler" and start the video again</li>
            <li>‚úÖ <strong>Expected:</strong> The relaxing video should automatically pause</li>
        </ol>

        <h2>What to Watch For:</h2>
        <ul>
            <li><strong>Console Logs:</strong> "=== VIDEO PLAY EVENT ===" when videos start</li>
            <li><strong>Pause Logs:</strong> "Paused video player: [id]" for other videos</li>
            <li><strong>Behavior:</strong> Only one video should be playing at any time</li>
        </ul>
    </div>

    <script>
        // Config with multiple videos for testing pause functionality
        const multiVideoConfig = {
            container: document.body,
            modal: {
                title: "üé¨ Multi-Video Pause Test",
                closeOnOverlay: true,
                closeOnEscape: true,
                showCloseButton: true
            },
            tabs: {
                exercise: { title: "Egzersizler", enabled: true },
                relaxing: { title: "Videolar", enabled: true },
                music: { title: "M√ºzikler", enabled: false }
            },
            exercise: {
                categories: [
                    {
                        id: "test-exercise",
                        title: "Test Exercise Category",
                        icon: "ayak.svg",
                        iconClass: "icon-test",
                        videoCount: 2
                    }
                ],
                videos: [
                    {
                        id: "exercise-video-1",
                        categoryId: "test-exercise",
                        title: "Exercise Video 1",
                        description: "First exercise video - should pause when other videos play",
                        thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
                        src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
                        duration: "09:01"
                    },
                    {
                        id: "exercise-video-2",
                        categoryId: "test-exercise",
                        title: "Exercise Video 2",
                        description: "Second exercise video - should pause when other videos play",
                        thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
                        src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
                        duration: "09:01"
                    }
                ]
            },
            relaxing: {
                videos: [
                    {
                        id: "relaxing-video-1",
                        title: "Relaxing Video 1",
                        description: "First relaxing video - should pause when other videos play",
                        thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
                        src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
                        duration: "09:01"
                    },
                    {
                        id: "relaxing-video-2",
                        title: "Relaxing Video 2",
                        description: "Second relaxing video - should pause when other videos play",
                        thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
                        src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
                        duration: "09:01"
                    },
                    {
                        id: "relaxing-video-3",
                        title: "Relaxing Video 3",
                        description: "Third relaxing video - should pause when other videos play",
                        thumbnail: "thumbnails/View_From_A_Blue_Moon_Trailer-HD.jpg",
                        src: "videos/View_From_A_Blue_Moon_Trailer-1080p.mp4",
                        duration: "09:01"
                    }
                ]
            },
            music: { currentTrack: 0, autoplay: false, tracks: [] },
            toast: { enabled: false },
            assets: {
                basePath: "images/",
                icons: {
                    close: "close.svg",
                    closeActive: "close-active.svg",
                    play: "play.svg",
                    pause: "pause.svg",
                    next: "next.svg",
                    prev: "prev.svg",
                    playSmall: "play-sm.svg",
                    thumbnailPlay: "thumbnail-play.svg",
                    muted: "muted.svg",
                    unmuted: "unmuted.svg"
                }
            },
            events: {
                onOpen: (modal) => {
                    console.log('üé¨ MULTI-VIDEO TEST: Modal opened');
                },
                onClose: (modal) => {
                    console.log('üé¨ MULTI-VIDEO TEST: Modal closed');
                },
                onTabChange: (newTab, oldTab, modal) => {
                    console.log('üé¨ MULTI-VIDEO TEST: Tab changed from', oldTab, 'to', newTab);
                },
                onVideoPlay: (videoSrc, modal) => {
                    console.log('üé¨ MULTI-VIDEO TEST: Video play requested:', videoSrc);
                }
            }
        };

        let zindeKalModal;

        document.addEventListener('DOMContentLoaded', function() {
            try {
                zindeKalModal = new ZindeKalModal(multiVideoConfig);
                
                document.getElementById('openModalBtn').addEventListener('click', () => {
                    console.clear();
                    console.log('üé¨ MULTI-VIDEO PAUSE TEST STARTED');
                    console.log('üëÄ Watch for "VIDEO PLAY EVENT" and "PAUSEALLOTHERVIDEOS" logs');
                    zindeKalModal.open();
                });
                
            } catch (error) {
                console.error('üêõ Failed to initialize modal:', error);
            }
        });
    </script>
</body>
</html>